<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make Animations</title>
    <style>
      @supports (display: grid) and (width: fit-content) and (user-select: none) {
        html>body>form>hr#tab-bar {
          height: 0.1rem;
          grid-column: 2/-2;
          grid-row: 2/span 1;
        }

        html>body>form>hr#tab-indicator {
          height: 0.3rem;
          grid-row: 2/span 1;
          grid-column-end: span 1;
        }

        html>body>form>hr#hover-indicator {
          height: 0.25rem;
          grid-row: 2/span 1;
          grid-column-end: span 1;
        }

        html>body>form>hr#hover-bar {
          height: 0.2rem;
          grid-row: 2/span 1;
          grid-column-end: span 1;
        }

        html>body>form>div#tool-box {
          grid-template: 1/1;
        }

        html>body>form>div#tool-box>div {
          grid-area: 1/1;
          contain: strict;
          content-visibility: hidden;
          z-index: 1;
        }

        html>body>form>input:nth-of-type(1):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 2;
        }

        html>body>form>input:nth-of-type(1):checked~hr#hover-bar {
          grid-column-start: 2;
        }

        html>body>form>input:nth-of-type(2):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 3;
        }

        html>body>form>input:nth-of-type(2):checked~hr#hover-bar {
          grid-column-start: 3;
        }

        html>body>form>input:nth-of-type(3):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 4;
        }

        html>body>form>input:nth-of-type(3):checked~hr#hover-bar {
          grid-column-start: 4;
        }

        html>body>form>input:nth-of-type(4):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 5;
        }

        html>body>form>input:nth-of-type(4):checked~hr#hover-bar {
          grid-column-start: 5;
        }

        html>body>form>input:nth-of-type(5):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 6;
        }

        html>body>form>input:nth-of-type(5):checked~hr#hover-bar {
          grid-column-start: 6;
        }

        html>body>form>input:nth-of-type(6):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 7;
        }

        html>body>form>input:nth-of-type(6):checked~hr#hover-bar {
          grid-column-start: 7;
        }

        html>body>form>input:nth-of-type(7):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 8;
        }

        html>body>form>input:nth-of-type(7):checked~hr#hover-bar {
          grid-column-start: 8;
        }

        html>body>form>input:nth-of-type(8):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 9;
        }

        html>body>form>input:nth-of-type(8):checked~hr#hover-bar {
          grid-column-start: 9;
        }

        html>body>form>input:nth-of-type(9):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 10;
        }

        html>body>form>input:nth-of-type(9):checked~hr#hover-bar {
          grid-column-start: 10;
        }

        html>body>form>input:nth-of-type(10):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 11;
        }

        html>body>form>input:nth-of-type(10):checked~hr#hover-bar {
          grid-column-start: 11;
        }

        html>body>form>input:nth-of-type(11):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 12;
        }

        html>body>form>input:nth-of-type(11):checked~hr#hover-bar {
          grid-column-start: 12;
        }

        html>body>form>input:nth-of-type(12):checked~hr:is(#hover-indicator, #tab-indicator) {
          grid-column-start: 13;
        }

        html>body>form>input:nth-of-type(12):checked~hr#hover-bar {
          grid-column-start: 13;
        }

        html>body>form>label:nth-of-type(1):hover~hr#hover-indicator {
          grid-column-start: 2;
          display: inherit;
        }

        html>body>form>input:nth-of-type(1):hover~hr#hover-bar {
          grid-column-end: 2;
          display: inherit;
        }

        html>body>form>input:nth-of-type(1):checked~div#tool-box>div:nth-of-type(1) {
          content-visibility: visible;
          z-index: 2;
        }

        html>body>form>label:nth-of-type(2):hover~hr#hover-indicator {
          grid-column-start: 3;
          display: inherit;
        }

        html>body>form>input:nth-of-type(2):hover~hr#hover-bar {
          grid-column-end: 3;
          display: inherit;
        }

        html>body>form>input:nth-of-type(2):checked~div#tool-box>div:nth-of-type(2) {
          content-visibility: visible;
          z-index: 2;
        }

        html>body>form>label:nth-of-type(3):hover~hr#hover-indicator {
          grid-column-start: 4;
          display: inherit;
        }

        html>body>form>input:nth-of-type(3):hover~hr#hover-bar {
          grid-column-end: 4;
          display: inherit;
        }

        html>body>form>input:nth-of-type(3):checked~div#tool-box>div:nth-of-type(3) {
          content-visibility: visible;
          z-index: 2;
        }

        html>body>form>label:nth-of-type(4):hover~hr#hover-indicator {
          grid-column-start: 5;
          display: inherit;
        }

        html>body>form>input:nth-of-type(4):hover~hr#hover-bar {
          grid-column-end: 5;
          display: inherit;
        }

        html>body>form>input:nth-of-type(4):checked~div#tool-box>div:nth-of-type(4) {
          content-visibility: visible;
          z-index: 2;
        }

        html>body>form>label:nth-of-type(5):hover~hr#hover-indicator {
          grid-column-start: 6;
          display: inherit;
        }

        html>body>form>input:nth-of-type(5):hover~hr#hover-bar {
          grid-column-end: 6;
          display: inherit;
        }

        html>body>form>input:nth-of-type(5):checked~div#tool-box>div:nth-of-type(5) {
          content-visibility: visible;
          z-index: 2;
        }

        html>body>form>label:nth-of-type(6):hover~hr#hover-indicator {
          grid-column-start: 7;
          display: inherit;
        }

        html>body>form>input:nth-of-type(6):hover~hr#hover-bar {
          grid-column-end: 7;
          display: inherit;
        }

        html>body>form>input:nth-of-type(6):checked~div#tool-box>div:nth-of-type(6) {
          content-visibility: visible;
          z-index: 2;
        }

        html>body>form>label:nth-of-type(7):hover~hr#hover-indicator {
          grid-column-start: 8;
          display: inherit;
        }

        html>body>form>input:nth-of-type(7):hover~hr#hover-bar {
          grid-column-end: 8;
          display: inherit;
        }

        html>body>form>input:nth-of-type(7):checked~div#tool-box>div:nth-of-type(7) {
          content-visibility: visible;
          z-index: 2;
        }

        html>body>form>label:nth-of-type(8):hover~hr#hover-indicator {
          grid-column-start: 9;
          display: inherit;
        }

        html>body>form>input:nth-of-type(8):hover~hr#hover-bar {
          grid-column-end: 9;
          display: inherit;
        }

        html>body>form>input:nth-of-type(8):checked~div#tool-box>div:nth-of-type(8) {
          content-visibility: visible;
          z-index: 2;
        }

        html>body>form>label:nth-of-type(9):hover~hr#hover-indicator {
          grid-column-start: 10;
          display: inherit;
        }

        html>body>form>input:nth-of-type(9):hover~hr#hover-bar {
          grid-column-end: 10;
          display: inherit;
        }

        html>body>form>input:nth-of-type(9):checked~div#tool-box>div:nth-of-type(9) {
          content-visibility: visible;
          z-index: 2;
        }

        html>body>form>label:nth-of-type(10):hover~hr#hover-indicator {
          grid-column-start: 11;
          display: inherit;
        }

        html>body>form>input:nth-of-type(10):hover~hr#hover-bar {
          grid-column-end: 11;
          display: inherit;
        }

        html>body>form>input:nth-of-type(10):checked~div#tool-box>div:nth-of-type(10) {
          content-visibility: visible;
          z-index: 2;
        }

        html>body>form>label:nth-of-type(11):hover~hr#hover-indicator {
          grid-column-start: 12;
          display: inherit;
        }

        html>body>form>input:nth-of-type(11):hover~hr#hover-bar {
          grid-column-end: 12;
          display: inherit;
        }

        html>body>form>input:nth-of-type(11):checked~div#tool-box>div:nth-of-type(11) {
          content-visibility: visible;
          z-index: 2;
        }

        html>body>form>label:nth-of-type(12):hover~hr#hover-indicator {
          grid-column-start: 13;
          display: inherit;
        }

        html>body>form>input:nth-of-type(12):hover~hr#hover-bar {
          grid-column-end: 13;
          display: inherit;
        }

        html>body>form>input:nth-of-type(12):checked~div#tool-box>div:nth-of-type(12) {
          content-visibility: visible;
          z-index: 2;
        }
      }
    </style>
    <style>
      /*
STYLE GUIDE:

1. for sizing ui... no pixels nowhere nohow not ever nope and in no place. I will find you and kill you!
2. use ">" over " " wherever possible and reasonable
3. place duplicate code that should remain in sync in a,b {...} even if b {...} already exists
4. grid templates only use min-content and auto (and maybe fr units)
5. minimize depth. use complex grids over nesting wherever reasonable
6. no timed animations/transitions
7. its grayscale baby
*/
      @supports (display: grid) and (width: fit-content) and (user-select: none) {
        html>body>form#ui {
          grid-template: min-content 2rem auto/auto repeat(11, min-content) auto;
          padding: 0.5rem;
        }

        html>body>form#ui>div#tool-box {
          contain: strict;
          grid-column: 1/-1;
          grid-row: 3/span 1;
        }

        html>body>form#ui>label:nth-of-type(1) {
          grid-column: 2/span 1;
          grid-row: 1/span 1;
        }

        html>body>form#ui>label:nth-of-type(2) {
          grid-column: 3/span 1;
          grid-row: 1/span 1;
        }

        html>body>form#ui>label:nth-of-type(3) {
          grid-column: 4/span 1;
          grid-row: 1/span 1;
        }

        html>body>form#ui>label:nth-of-type(4) {
          grid-column: 5/span 1;
          grid-row: 1/span 1;
        }

        html>body>form#ui>label:nth-of-type(5) {
          grid-column: 6/span 1;
          grid-row: 1/span 1;
        }

        html>body>form#ui>label:nth-of-type(6) {
          grid-column: 7/span 1;
          grid-row: 1/span 1;
        }

        html>body>form#ui>label:nth-of-type(7) {
          grid-column: 8/span 1;
          grid-row: 1/span 1;
        }

        html>body>form#ui>label:nth-of-type(8) {
          grid-column: 9/span 1;
          grid-row: 1/span 1;
        }

        html>body>form#ui>label:nth-of-type(9) {
          grid-column: 10/span 1;
          grid-row: 1/span 1;
        }

        html>body>form#ui>label:nth-of-type(10) {
          grid-column: 11/span 1;
          grid-row: 1/span 1;
        }

        html>body>form#ui>label:nth-of-type(11) {
          grid-column: 12/span 1;
          grid-row: 1/span 1;
        }

        html>body>form#ui>label:nth-of-type(12) {
          grid-column: 13/span 1;
          grid-row: 1/span 1;
        }
      }
    </style>
    <style>
      @supports (display: grid) and (width: fit-content) and (user-select: none) {
        html>body {
          --offwhite: white;
          --offblack: #212121;
          background-color: var(--offwhite);
          width: 100vw;
          height: 100vh;
          font-family: "Courier New", monospace;
          font-weight: 200;
          font-variant-ligatures: contextual;
          font-size: 0.9rem;
          user-select: none;
        }

        html>body,
        html>body *:not(script, style, head, meta) {
          display: grid;
          margin: 0;
          padding: 0;
          box-sizing: border-box;
          border-color: transparent;
          border: none;
        }

        html>body>form {
          width: 100vw;
          height: 100vh;
        }

        html>body>form>input {
          display: none;
        }

        html>body>form>hr {
          align-self: center;
          justify-self: center;
          width: 100%;
        }

        html>body>form div,
        html>body>form label {
          display: grid;
          padding: 0.5rem;
        }

        html>body>form hr {
          color: var(--offwhite);
          background-color: var(--offblack);
        }

        html>body>form div.black-box,
        html>body>form label {
          color: var(--offblack);
          background-color: var(--offwhite);
        }

        html>body>form label {
          cursor: pointer;
          text-align: center;
          width: 2.5rem;
          height: 2rem;
          align-self: start;
          justify-self: end;
          align-items: center;
          justify-items: center;
        }
      }
    </style>
  </head>

  <body>
    <form id="ui">
      <input type="radio" name="tab" value="sigils" id="tab-1" checked="">
      <label for="tab-1" title="view sigils">|$</label>
      <input type="radio" name="tab" value="projects" id="tab-2">
      <label for="tab-2" title="view projects">|&amp;</label>
      <input type="radio" name="tab" value="colors" id="tab-3">
      <label for="tab-3" title="view colors">|#</label>
      <input type="radio" name="tab" value="paths" id="tab-4">
      <label for="tab-4" title="view paths">|~</label>
      <input type="radio" name="tab" value="objects" id="tab-5">
      <label for="tab-5" title="view objects">|%</label>
      <input type="radio" name="tab" value="move" id="tab-6">
      <label for="tab-6" title="navigation tool">^_</label>
      <input type="radio" name="tab" value="pick-object" id="tab-7">
      <label for="tab-7" title="select object tool">^%</label>
      <input type="radio" name="tab" value="pick-path" id="tab-8">
      <label for="tab-8" title="select path tool">^~</label>
      <input type="radio" name="tab" value="add-color" id="tab-9">
      <label for="tab-9" title="select color add tool">+#</label>
      <input type="radio" name="tab" value="add-path" id="tab-10">
      <label for="tab-10" title="new path tool">+~</label>
      <input type="radio" name="tab" value="add-object" id="tab-11">
      <label for="tab-11" title="create object from path tool">+%</label>
      <hr id="tab-bar">
      <hr id="tab-indicator">
      <hr id="hover-indicator">
      <hr id="hover-bar">
      <div id="tool-box">
        <div id="vs">view sigils</div>
        <div id="vp">view projects</div>
        <div id="vc">view colors</div>
        <div id="vpa">view paths</div>
        <div id="vo">view objects</div>
        <div id="mt">move</div>
        <div id="po">pick object</div>
        <div id="pp">pick path</div>
        <div id="ac">add color</div>
        <div id="ap">add path</div>
        <div id="ao">add object</div>
      </div>
    </form>
    <script defer="">
      "use strict";
      Main: {
        const ui = {};
        FormBinding: {
          const uiForm = document.forms.ui;
          listen: {
            function setHashToUI() {
              const formData = new FormData(uiForm);
              const entries = Array.from(formData.entries());
              const onbect = Object.fromEntries(entries);
              const json = JSON.stringify(onbect);
              const base64 = btoa(json);
              window.location.hash = `#${base64}`;
            }
            uiForm.addEventListener(`change`, setHashToUI);
          }
          object: {
            const keys = Array.from((new FormData(uiForm)).keys());
            for (const key of keys) {
              function get() {
                const formData = new FormData(uiForm);
                const value = formData.get(key);
                if (value === null)
                  return undefined;
                return value.toString();
              }

              function set(value) {
                try {
                  window.location.hash = btoa(JSON.stringify(ui));
                } catch {
                  window.location.hash = `#`;
                }
                const radio = document.querySelector(`[type="radio"][name="${key}"][value="${value}"]`);
                if (radio !== null)
                  return radio.click();
                const check = document.querySelector(`[type="checkbox"][name="${key}"]`);
                if (check !== null)
                  return check.click();
                document.querySelector(`[name="${key}"]`)?.setAttribute(`value`, value);
              }
              Object.defineProperty(ui, key, {
                get: get,
                set: set,
                enumerable: true,
                configurable: false
              });
            }
            Object.freeze(ui);
            try {
              Object.assign(ui, JSON.parse(atob(window.location.hash.slice(1))));
            } catch {
              window.location.hash = `#`;
            };
          }
        }
        const reader = {};
        readerWorker: {
          const callbacks = new Map();
          const worker = new Worker(`scripts/fileWorker.js`);
          worker: {
            function onmessage({
              data
            }) {
              const entry = data.entries().next();
              if (entry.done)
                return;
              const value = entry.value;
              if (value === undefined)
                return;
              const [name, text] = value;
              const callback = callbacks.get(name);
              if (callback === undefined)
                return;
              callbacks.delete(name);
              callback(text);
            }
            Object.defineProperty(worker, 'onmessage', {
              value: onmessage,
              enumerable: true,
              writable: false,
              configurable: false
            });
            Object.freeze(worker);
          }
          reader: {
            async function open() {
              const files = await window.showOpenFilePicker({
                multiple: false,
                types: [{
                  description: `SVG Files`,
                  accept: {
                    'image/svg+xml': [`.svg`]
                  }
                }]
              });
              return files.pop();
            }
            async function read(callback) {
              const fileMaybe = await open();
              if (fileMaybe === undefined)
                return;
              callbacks.set(fileMaybe.name, callback);
              const file = fileMaybe;
              worker.postMessage(file);
            }
            Object.defineProperty(reader, `svg`, {
              value: read,
              enumerable: true,
              writable: false,
              configurable: false
            });
            Object.freeze(reader);
          }
        }
      }
    </script>
    <script defer="">
      "use strict";
      KeyBinding: {
        const shiftmap = Object.fromEntries([
          [`\``, `~`],
          [`1`, `!`],
          [`2`, `@`],
          [`3`, `#`],
          [`4`, `$`],
          [`5`, `%`],
          [`6`, `^`],
          [`7`, `&`],
          [`8`, `*`],
          [`9`, `(`],
          [`0`, `)`],
          [`-`, `_`],
          [`=`, `+`],
          [`[`, `{`],
          [`]`, `}`],
          [`\\`, `|`],
          [`'`, `"`],
          [`;`, `:`],
          [`,`, `<`],
          [`.`, `>`],
          [`/`, `?`],
        ]);
        const key = {
          to: NaN,
          stack: ``,
          set: new Set(Object.keys(shiftmap).concat(Object.values(shiftmap)))
        };
        document.addEventListener(`keydown`, event => {
          clearTimeout(key.to);
          const eles = new Map();
          for (const ele of Array.from(document.querySelectorAll(`label`))) {
            if (eles.has(`${ele.textContent}`))
              throw new Error(`Dumb retard error: shit a brick`);
            if (window.getComputedStyle(ele).display != `none`)
              eles.set(`${ele.textContent}`, ele);
          }
          key.stack = (key.set.has(event.key)) ? (key.stack + (shiftmap[event.key] ?? event.key)) : ``;
          key.stack = (key.stack.length > 3) ? key.stack.slice(-3) : key.stack;
          if (eles.has(key.stack))
            key.to = setTimeout(() => (eles.get(key.stack)?.click(), key.stack = ``), 0);
          else
            key.to = setTimeout(() => (key.stack = ``), 500);
        }, {
          passive: true,
          capture: true
        });
      }
    </script>




  </body>

</html>